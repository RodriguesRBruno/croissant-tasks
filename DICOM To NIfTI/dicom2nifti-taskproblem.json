{
    "@context": {
        "cr": "http://mlcommons.org/croissant/",
        "sc": "https://schema.org/"
    },
    "@type": "cr:TaskProblem",
    "@id": "https://url/for/task/webpage#problem",
    "name": "DICOM To NIfTI Conversion",
    "cr:TaskType": "Data Processing",
    "cr:input": [
        {
            "@type": "cr:InputSpec",
            "name": "DICOM Image Directory",
            "cr:schema": {
                "@type": "cr:RecordSet",
                "field": [
                    {
                        "@type": "Field",
                        "name": "image_id",
                        "dataType": "sc:Text"
                    },
                    {
                        "@type": "Field",
                        "name": "filename",
                        "dataType": "sc:Text"
                    },
                    {
                        "@type": "Field",
                        "name": "image_content",
                        "dataType": "sc:ImageObject"
                    }
                ]
            }
        }
    ],
    "cr:output": [
        {
            "@type": "cr:OutputSpec",
            "name": "NIfTI Image",
            "cr:schema": {
                "@type": "cr:RecordSet",
                "field": [
                    {
                        "name": "image",
                        "dataType": "sc:Image"
                    },
                    {
                        "name": "predicted_label",
                        "dataType": "sc:Text"
                    }
                ]
            }
        },
        {
            "@type": "cr:OutputSpec",
            "name": "Metadata CSV",
            "cr:schema": {
                "@type": "cr:RecordSet",
                "field": [
                    {
                        "name": "field_1",
                        "dataType": "sc:Text"
                    },
                    {
                        "name": "field_2",
                        "dataType": "sc:Integer"
                    },
                    {
                        "name": "field_3",
                        "dataType": "sc:Float"
                    }
                ]
            }
        }
    ],
    "cr:implementation": {
        "@type": "cr:ImplementationSpec",
        "name": "Implementation Specification",
        "description": "Must be a runnable script or container that takes in a Directory of .dcm images and outputs a single NIfTI image and a single CSV metadata file."
    },
    "cr:evaluation": {
        "@type": "cr:EvaluationMethod",
        "name": "Accuracy Evaluator",
        "url": "https://link/to/evaluator/script.py",
        "minimum_criteria": "0.42"
    },
    "cr:reference_assets": {
        "cr:input": [
            {
                "@type": "sc:Dataset",
                "name": "Sample DICOM Image Directory",
                "description": "A sample directory containing a single series of DICOM images. May be used for the development of Implementations in a Croissant Task Solution for this problem.",
                "cr:schema": [
                    {
                        "@type": "cr:RecordSet",
                        "name": "ImageRecords",
                        "description": "Records of input DICOM images",
                        "url": "https://link/to/sample_dataset.csv",
                        "field": [
                            {
                                "@type": "Field",
                                "name": "image_id",
                                "description": "Unique identifier for the image.",
                                "dataType": "sc:Text"
                            },
                            {
                                "@type": "Field",
                                "name": "filename",
                                "description": "Filename of the image.",
                                "dataType": "sc:Text",
                                "source": {
                                    "@type": "Extract",
                                    "fileSet": [
                                        {
                                            "@type": "FileSet",
                                            "name": "ImageFiles",
                                            "containedIn": "/sample/directory/with/input/dicom/images",
                                            "encodingFormat": ".dcm"
                                        }
                                    ],
                                    "extract": {
                                        "column": "filename"
                                    }
                                }
                            },
                            {
                                "@type": "Field",
                                "name": "image_content",
                                "description": "The raw image data.",
                                "dataType": "sc:ImageObject",
                                "source": {
                                    "@type": "Extract",
                                    "fileSet": [
                                        {
                                            "@type": "FileSet",
                                            "name": "ImageFiles"
                                        }
                                    ],
                                    "extract": {
                                        "column": "content"
                                    }
                                }
                            }
                        ]
                    }
                ]
            }
        ],
        "cr:output": [
            {
                "@type": "sc:Dataset",
                "name": "Sample NIfTI image",
                "description": "A sample NIfTI compressed image. May be used to validate Implementations in Croissant Task Solutions corresponding to this problem.",
                "cr:schema": [
                    {
                        "@type": "cr:RecordSet",
                        "name": "ImageRecords",
                        "description": "Records of the output NIfTI File",
                        "url": "https://link/to/sample_output.nii.gz",
                        "field": [
                            {
                                "@type": "Field",
                                "name": "image_id",
                                "description": "Unique identifier for the image.",
                                "dataType": "sc:Text"
                            },
                            {
                                "@type": "Field",
                                "name": "filename",
                                "description": "Filename of the image.",
                                "dataType": "sc:Text",
                                "source": {
                                    "@type": "Extract",
                                    "fileSet": [
                                        {
                                            "@type": "FileSet",
                                            "name": "ImageFiles",
                                            "containedIn": "path/to/sample/output/nifti/file",
                                            "encodingFormat": ".nii.gz"
                                        }
                                    ],
                                    "extract": {
                                        "column": "filename"
                                    }
                                }
                            },
                            {
                                "@type": "Field",
                                "name": "image_content",
                                "description": "The raw image data.",
                                "dataType": "sc:ImageObject",
                                "source": {
                                    "@type": "Extract",
                                    "fileSet": [
                                        {
                                            "@type": "FileSet",
                                            "name": "ImageFiles"
                                        }
                                    ],
                                    "extract": {
                                        "column": "content"
                                    }
                                }
                            }
                        ]
                    }
                ]
            },
            {
                "@type": "sc:Dataset",
                "name": "Execution metadata",
                "description": "A CSV file containing metadata about an execution",
                "recordSets": [
                    {
                        "@type": "cr:RecordSet",
                        "name": "csv_records",
                        "url": "https://link/to/metadata.csv",
                        "source": {
                            "fileObject": "nifti_conversion_csv",
                            "extract": {
                                "column": [
                                    "field_1",
                                    "field_2",
                                    "field_3"
                                ]
                            }
                        },
                        "fields": [
                            {
                                "@type": "Field",
                                "name": "field_1",
                                "dataType": "sc:Text"
                            },
                            {
                                "@type": "Field",
                                "name": "field_2",
                                "dataType": "sc:Integer"
                            },
                            {
                                "@type": "Field",
                                "name": "field_3",
                                "dataType": "sc:Float"
                            }
                        ]
                    }
                ]
            }
        ]
    }
}